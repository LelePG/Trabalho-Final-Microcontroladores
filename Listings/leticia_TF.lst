C51 COMPILER V9.60.0.0   LETICIA_TF                                                        11/10/2021 07:36:26 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LETICIA_TF
OBJECT MODULE PLACED IN .\Objects\leticia_TF.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE leticia_TF.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listing
                    -s\leticia_TF.lst) TABS(2) OBJECT(.\Objects\leticia_TF.obj)

line level    source

   1          #include <at89x52.h>
   2          #include <lib_timers.h>
   3          #include <lib_7seg.h>
   4          #include <lib_keypad.h>
   5          #include <lib_lcd.h>
   6          #include <lib_ativaAgua.h>
   7          #include <definesIO.h>
   8          
   9          
  10          void verificaSegundo(); //Verifica se um segundo se passou
  11          void defineIntervalo();
  12          void configuraAplicacao();
  13          void ativaAgua(void);
  14          
  15          void teste();
  16          
  17          volatile int valorResetaTimer = 200;
  18          volatile int contadorDeMiliSeg;
  19          volatile int segundosDisplay;
  20          
  21          void main()
  22          {
  23   1        configLCD();
  24   1        configuraAplicacao();
  25   1        while (1)
  26   1        {
  27   2      
  28   2          atualizaDisplays(segundosDisplay);
  29   2          if(segundosDisplay == 0){
  30   3            ativaAgua();
  31   3          }
  32   2          //delayT0(1000);
  33   2        }
  34   1      }
  35          
  36          void teste() interrupt 0{
  37   1        configuraAplicacao();
  38   1        
  39   1      }
  40          
  41          void configuraAplicacao() 
  42          {
  43   1        defineIntervalo();
  44   1        EA = 1;
  45   1        ET1 = 1;
  46   1        EX0 = 1;
  47   1        EX1 = 1;
  48   1        enableAllLEDs = 0;
  49   1        ativaComponentes = 0;
  50   1        segundosDisplay = valorResetaTimer;
  51   1        iniciaCont50msT1();
  52   1      }
  53          
  54          void defineIntervalo()
C51 COMPILER V9.60.0.0   LETICIA_TF                                                        11/10/2021 07:36:26 PAGE 2   

  55          {
  56   1      
  57   1        int inputUsuario =0;
  58   1        valorResetaTimer = 0;
  59   1          mensagemInicial();
  60   1      
  61   1        do
  62   1        {
  63   2          valorResetaTimer *= 10;
  64   2          valorResetaTimer += inputUsuario;
  65   2          inputUsuario = identificaCaractere();
  66   2          //atualizaDisplays(inputUsuario);
  67   2          delayT0(300);
  68   2        } while (inputUsuario >= 0);
  69   1        
  70   1        clearLCD();
  71   1      }
  72          
  73          
  74          
  75          
  76          
  77          void verificaSegundo() interrupt 3
  78          {
  79   1        //Verifica se um segundo passou, levando em considera��o que para que isso aconte�a
  80   1        //a fun��o espera 50ms precisa ser executada 200 vezes.
  81   1        desativaT1();
  82   1        contadorDeMiliSeg++; //anota mais uma execu��o da fun��o espera 50ms
  83   1        if (contadorDeMiliSeg == 200)
  84   1        {
  85   2          segundosDisplay--; //diminui o valor de segundos exibido no display
  86   2          contadorDeMiliSeg = 0;
  87   2        }
  88   1        iniciaCont50msT1(); // inicia o contador novamente
  89   1      
  90   1      }
  91          
  92          void ativaAgua(void) interrupt 2//não está retornando pra main
  93          { // foi apertardo o bot?o p3.2
  94   1        //reseta o contador principal
  95   1        mensagemAguaInicial();
  96   1        
  97   1        EA = 0;
  98   1        unidade = 1;
  99   1        dezena = 1;
 100   1        centena = 1;
 101   1        milhar = 1;
 102   1        desativaT1();
 103   1        contadorDeMiliSeg = 0;
 104   1        segundosDisplay = valorResetaTimer;
 105   1      
 106   1        //Ativa luz, buzzer e bomba
 107   1        ligaLED(500);
 108   1      
 109   1        EA = 1;
 110   1        iniciaCont50msT1();
 111   1        
 112   1        mensagemAguaFinal();
 113   1      
 114   1      }
 115          

C51 COMPILER V9.60.0.0   LETICIA_TF                                                        11/10/2021 07:36:26 PAGE 3   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    990    ----
   CONSTANT SIZE    =     67    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8      10
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
